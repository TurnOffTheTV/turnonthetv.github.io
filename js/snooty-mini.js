var sounds,images,soundRand,font,px1=83,py1=91,px2=223,py2=91,px3=363,py3=91,px4=503,py4=91,cx=0,cy=0,rot1=60,rot2=60,rot3=60,rot4=60,dir1="right",dir2="left",dir3="right",dir4="left",legRot1=0,legRot2=0,legRot3=0,legRot4=0,legRotTF1=!1,legRotTF2=!1,legRotTF3=!1,legRotTF4=!1,doLegRot1=!0,doLegRot2=!0,doLegRot3=!0,doLegRot4=!0,keyp1={l:!1,r:!1,u:!1,d:!1},keyp2={l:!1,r:!1,u:!1,d:!1},keyp3={l:!1,r:!1,u:!1,d:!1},keyp4={l:!1,r:!1,u:!1,d:!1},onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,onWall1=!1,onWall2=!1,onWall3=!1,onWall4=!1,onFloorTF1=!1,onFloorTF2=!1,onFloorTF3=!1,onFloorTF4=!1,jump1=0,jump2=0,jump3=0,jump4=0,fall1=0,fall2=0,fall3=0,fall4=0,blink1=0,blink2=0,blink3=0,blink4=0,scene=0,jumpRand1=0,jumpRand2=0,jumpRand3=0,jumpRand4=0,enemies=[],coins=[],level=0,controlMode1=-1,controlMode2=-1,controlMode3=-1,controlMode4=-1,selectedButton=0,deadzone={inner:.2,outer:0},paused=!1,init=!0,levelStart={x:83,y:91},deathRumbleTimer=0,style=document.getElementById("style"),fallCount1=0,fallCount2=0,fallCount3=0,fallCount4=0,score1={score:0,size:0,levelScore:0},score2={score:0,size:0,levelScore:0},score3={score:0,size:0,levelScore:0},score4={score:0,size:0,levelScore:0},cloudX=0,clouds=[],music=0,sfx=0,isDark=!1,cursorTimeout=!1,maxLevel=0;function preload(){sounds={level:loadSound("https://turnoffthetv.github.io/audio/ssatf-overworld.mp3"),menu:loadSound("https://turnoffthetv.github.io/audio/ssatf-menu.mp3"),overworld:loadSound("https://turnoffthetv.github.io/audio/ssatf-overworld.mp3"),cave:loadSound("https://turnoffthetv.github.io/audio/ssatf-cave.mp3"),clouds:loadSound("https://turnoffthetv.github.io/audio/ssatf-clouds.mp3"),water:loadSound("https://turnoffthetv.github.io/audio/ssatf-ocean.mp3"),boss:loadSound("https://turnoffthetv.github.io/audio/ssatf-boss.mp3"),space:loadSound("https://turnoffthetv.github.io/audio/ssatf-space.mp3"),kill:{spike0:loadSound("https://turnoffthetv.github.io/audio/SSatF/spike-0.mp3"),spike1:loadSound("https://turnoffthetv.github.io/audio/SSatF/spike-1.mp3"),spike2:loadSound("https://turnoffthetv.github.io/audio/SSatF/spike-2.mp3")},fall:{cave0:loadSound("https://turnoffthetv.github.io/audio/SSatF/cave-fall-0.mp3"),cave1:loadSound("https://turnoffthetv.github.io/audio/SSatF/cave-fall-1.mp3"),cave2:loadSound("https://turnoffthetv.github.io/audio/SSatF/cave-fall-2.mp3"),grass0:loadSound("https://turnoffthetv.github.io/audio/SSatF/grass-fall-1.mp3"),grass1:loadSound("https://turnoffthetv.github.io/audio/SSatF/grass-fall-1.mp3"),grass2:loadSound("https://turnoffthetv.github.io/audio/SSatF/grass-fall-2.mp3"),cloud0:loadSound("https://turnoffthetv.github.io/audio/SSatF/cloud-fall-0.mp3"),cloud1:loadSound("https://turnoffthetv.github.io/audio/SSatF/cloud-fall-1.mp3"),cloud2:loadSound("https://turnoffthetv.github.io/audio/SSatF/cloud-fall-2.mp3")},footstep:{cave0:loadSound("https://turnoffthetv.github.io/audio/SSatF/cave-footstep-0.mp3"),cave1:loadSound("https://turnoffthetv.github.io/audio/SSatF/cave-footstep-1.mp3"),cave2:loadSound("https://turnoffthetv.github.io/audio/SSatF/cave-footstep-2.mp3"),grass0:loadSound("https://turnoffthetv.github.io/audio/SSatF/grass-footstep-0.mp3"),grass1:loadSound("https://turnoffthetv.github.io/audio/SSatF/grass-footstep-1.mp3"),grass2:loadSound("https://turnoffthetv.github.io/audio/SSatF/grass-footstep-2.mp3"),cloud0:loadSound("https://turnoffthetv.github.io/audio/SSatF/cloud-footstep-0.mp3"),cloud1:loadSound("https://turnoffthetv.github.io/audio/SSatF/cloud-footstep-1.mp3"),cloud2:loadSound("https://turnoffthetv.github.io/audio/SSatF/cloud-footstep-2.mp3")},thud:loadSound("https://turnoffthetv.github.io/audio/SSatF/thud.mp3"),blue:loadSound("https://turnoffthetv.github.io/audio/Crystal-sounds/General Sounds/Coins/sfx_coin_cluster1.wav"),yellow:loadSound("https://turnoffthetv.github.io/audio/Crystal-sounds/General Sounds/Coins/sfx_coin_double1.wav")},images={sky:loadImage("https://turnoffthetv.github.io/images/snooty-sky.png"),stars:loadImage("https://turnoffthetv.github.io/images/snooty-stars.png"),gems:loadImage("https://turnoffthetv.github.io/images/snooty-gems.png")},font=loadFont("https://turnoffthetv.github.io/fonts/tahoma.ttf")}function setup(){describe("Snooty Scooty and the Frowns"),createCanvas(windowWidth,windowHeight),textFont(font),getItem("music")>-1&&(music=getItem("music")),getItem("sfx")>-1&&(sfx=getItem("sfx"))}function getCookie(e){for(var o=e+"=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var l=t[n];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(o))return l.substring(o.length,l.length)}return""}function query(e){for(var o=window.location.search.substring(1).split("&"),t=0;t<o.length;t++){var n=o[t].split("=");if(decodeURIComponent(n[0])==e)return decodeURIComponent(n[1])}console.log("Query variable %s not found",e)}function hitbox(e,o,t,n){var l={p1:!1,p2:!1,p3:!1,p4:!1};return px1>e+cx&&px1<e+t+cx&&py1>o+cy&&py1<o+n+cy&&(l.p1=!0),px2>e+cx&&px2<e+t+cx&&py2>o+cy&&py2<o+n+cy&&(l.p2=!0),px3>e+cx&&px3<e+t+cx&&py3>o+cy&&py3<o+n+cy&&(l.p3=!0),px4>e+cx&&px4<e+t+cx&&py4>o+cy&&py4<o+n+cy&&(l.p4=!0),l}function drawSnooty(e){0===e&&(push(),translate(px1+rot1/12,py1),rotate(radians(legRot1)),stroke(0),strokeWeight(3),line(0,0,0,35),line(0,35,rot1/12,35),pop(),noStroke(),fill(235,255,84),push(),translate(px1,py1),rotate(radians(rot1)),scale(2),triangle(0,-40,-10,10,10,10),triangle(-10,9,-5,20,0,10),triangle(0,9,5,20,10,10),stroke(0),strokeWeight(2),line(rot1/30,-3,rot1/12,-5),strokeWeight(5),blink1>100&&stroke(255,0,0,0),(blink1+=random(.3,.7))>110&&(blink1=0),point(0-rot1/30,-10),stroke(0),rotate(radians(rot1+2*rot1)),pop(),push(),stroke(0),strokeWeight(3),translate(px1-rot1/12,py1),rotate(radians(legRot1-2*legRot1)),line(0,0,0,35),line(0,35,rot1/12,35),pop()),1===e&&(push(),translate(px2+rot2/12,py2),rotate(radians(legRot2)),stroke(0),strokeWeight(3),line(0,0,0,35),line(0,35,rot2/12,35),pop(),noStroke(),fill(128,99,255),push(),translate(px2,py2),rotate(radians(rot2)),scale(2),triangle(0,-40,-10,10,10,10),triangle(-10,9,-5,20,0,10),triangle(0,9,5,20,10,10),stroke(0),strokeWeight(2),line(rot2/30,-3,rot2/12,-5),strokeWeight(5),blink2>100&&stroke(255,0,0,0),(blink2+=random(.3,.7))>110&&(blink2=0),point(0-rot2/30,-10),stroke(0),rotate(radians(rot2+2*rot2)),pop(),push(),stroke(0),translate(px2-rot2/12,py2),rotate(radians(legRot2-2*legRot2)),line(0,0,0,35),line(0,35,rot2/12,35),pop()),2===e&&(push(),translate(px3+rot3/12,py3),rotate(radians(legRot3)),stroke(0),strokeWeight(3),line(0,0,0,35),line(0,35,rot3/12,35),pop(),noStroke(),fill(255,80,80),push(),translate(px3,py3),rotate(radians(rot3)),scale(2),triangle(0,-40,-10,10,10,10),triangle(-10,9,-5,20,0,10),triangle(0,9,5,20,10,10),stroke(0),strokeWeight(2),line(rot3/30,-3,rot3/12,-5),strokeWeight(5),blink3>100&&stroke(255,0,0,0),(blink3+=random(.3,.7))>110&&(blink3=0),point(0-rot3/30,-10),stroke(0),rotate(radians(rot3+2*rot3)),pop(),push(),stroke(0),translate(px3-rot3/12,py3),rotate(radians(legRot3-2*legRot3)),line(0,0,0,35),line(0,35,rot3/12,35),pop()),3===e&&(push(),translate(px4+rot4/12,py4),rotate(radians(legRot4)),stroke(0),strokeWeight(3),line(0,0,0,35),line(0,35,rot4/12,35),pop(),noStroke(),fill(76,255,135),push(),translate(px4,py4),rotate(radians(rot4)),scale(2),triangle(0,-40,-10,10,10,10),triangle(-10,9,-5,20,0,10),triangle(0,9,5,20,10,10),stroke(0),strokeWeight(2),line(rot4/30,-3,rot4/12,-5),strokeWeight(5),blink4>100&&stroke(255,0,0,0),(blink4+=random(.3,.7))>110&&(blink4=0),point(0-rot4/30,-10),stroke(0),rotate(radians(rot4+2*rot4)),pop(),push(),stroke(0),translate(px4-rot4/12,py4),rotate(radians(legRot4-2*legRot4)),line(0,0,0,35),line(0,35,rot4/12,35),pop())}function sound(e){1===scene&&(1===soundRand&&"footstep"===e&&sounds.footstep.grass0.play(),2===soundRand&&"footstep"===e&&sounds.footstep.grass1.play(),3===soundRand&&"footstep"===e&&sounds.footstep.grass2.play(),sounds.footstep.grass0.pan(map(px1,0,width,-1,1)),sounds.footstep.grass1.pan(map(px1,0,width,-1,1)),sounds.footstep.grass2.pan(map(px1,0,width,-1,1)),1===soundRand&&"fall"===e&&sounds.fall.grass0.play(),2===soundRand&&"fall"===e&&sounds.fall.grass1.play(),3===soundRand&&"fall"===e&&sounds.fall.grass2.play(),sounds.fall.grass0.pan(map(px1,0,width,-1,1)),sounds.fall.grass1.pan(map(px1,0,width,-1,1)),sounds.fall.grass2.pan(map(px1,0,width,-1,1))),2===scene&&(1===soundRand&&"footstep"===e&&sounds.footstep.cave0.play(),2===soundRand&&"footstep"===e&&sounds.footstep.cave1.play(),3===soundRand&&"footstep"===e&&sounds.footstep.cave2.play(),sounds.footstep.cave0.pan(map(px1,0,width,-1,1)),sounds.footstep.cave1.pan(map(px1,0,width,-1,1)),sounds.footstep.cave2.pan(map(px1,0,width,-1,1)),1===soundRand&&"fall"===e&&sounds.fall.cave0.play(),2===soundRand&&"fall"===e&&sounds.fall.cave1.play(),3===soundRand&&"fall"===e&&sounds.fall.cave2.play(),sounds.fall.cave0.pan(map(px1,0,width,-1,1)),sounds.fall.cave1.pan(map(px1,0,width,-1,1)),sounds.fall.cave2.pan(map(px1,0,width,-1,1))),3===scene&&(1===soundRand&&"footstep"===e&&sounds.footstep.cloud0.play(),2===soundRand&&"footstep"===e&&sounds.footstep.cloud1.play(),3===soundRand&&"footstep"===e&&sounds.footstep.cloud2.play(),sounds.footstep.cloud0.pan(map(px1,0,width,-1,1)),sounds.footstep.cloud1.pan(map(px1,0,width,-1,1)),sounds.footstep.cloud2.pan(map(px1,0,width,-1,1)),1===soundRand&&"fall"===e&&sounds.fall.cloud0.play(),2===soundRand&&"fall"===e&&sounds.fall.cloud1.play(),3===soundRand&&"fall"===e&&sounds.fall.cloud2.play(),sounds.fall.cloud0.pan(map(px1,0,width,-1,1)),sounds.fall.cloud1.pan(map(px1,0,width,-1,1)),sounds.fall.cloud2.pan(map(px1,0,width,-1,1)))}function controlinator(e){0===e&&(0===controlMode1&&(doLegRot1=!1,keyp1.u=!1,keyp1.l=!1,keyp1.r=!1,keyp1.d=!1,keyIsDown(87)&&(keyp1.u=!0),keyIsDown(83)&&(keyp1.d=!0),keyIsDown(65)&&(keyp1.l=!0,doLegRot1=!0),keyIsDown(68)&&(keyp1.r=!0,doLegRot1=!0),keyIsDown(27)&&!1===keyIsDown(16)&&(paused=!0)),keyp1.l&&(px1-=2),keyp1.r&&(px1+=2),keyp1.l&&onFloor1&&(dir1="left"),keyp1.r&&onFloor1&&(dir1="right"),2===controlMode1&&(keyp1.l=!1,keyp1.r=!1,p1.stick.lx>deadzone.inner&&onFloor1&&(dir1="right"),p1.stick.lx<deadzone.inner-2*deadzone.inner&&onFloor1&&(dir1="left"),p1.stick.lx>.2||p1.stick.lx<deadzone.inner-2*deadzone.inner?(doLegRot1=!0,px1+=2*p1.stick.lx):doLegRot1=!1,p1.button.cross?keyp1.u=!0:keyp1.u=!1,p1.button.options&&(paused=!0)),3===controlMode1&&(keyp1.l=!1,keyp1.r=!1,keyp1.u=!1,keyp1.d=!1,p1.button.up&&(keyp1.u=!0),p1.button.down&&(keyp1.d=!0),p1.button.left&&(keyp1.l=!0),p1.button.right&&(keyp1.r=!0),p1.button.right&&onFloor1&&(dir1="right"),p1.button.left&&onFloor1&&(dir1="left"),doLegRot1=!(!p1.button.right&&!p1.button.left),p1.button.cross&&(keyp1.u=!0),p1.button.options&&(paused=!0)),"left"===dir1&&(rot1-=5),"right"===dir1&&(rot1+=5),rot1>60&&(rot1=60),rot1<-60&&(rot1=-60),doLegRot1?(legRot1>30&&(legRotTF1=!1),legRot1<-30&&(legRotTF1=!0),legRotTF1&&(legRot1+=2),!1===legRotTF1&&(legRot1-=2)):(legRot1>0&&(legRot1-=2),legRot1<0&&(legRot1+=2)),legRot1>30&&onFloor1&&sound("footstep"),legRot1<-30&&onFloor1&&sound("footstep"),1===fallCount1&&sound("fall"),onFloor1&&(fallCount1+=1),!1===onFloor1&&(fallCount1=0),keyp1.l&&keyp1.r?(rot1<0&&(rot1-=5),rot1>0&&(rot1+=5),doLegRot1=!1):doLegRot1=!0,keyp1.u&&onFloor1&&(jump1=5,onFloor1=!1,fall1=0),onFloor1&&!1===keyp1.u&&(fall1=0,jump1=0),!1===onFloor1&&(fall1+=.1),py1+=fall1,py1-=jump1,px1>width-width/3&&(cx-=2,px1-=2,px2-=2,px3-=2,px4-=2),px1<width/3&&(cx+=2,px1+=2,px2+=2,px3+=2,px4+=2),py1>height-height/3&&(cy-=2,py1-=2,py2-=2,py3-=2,py4-=2),py1<height/3&&(cy+=2,py1+=2,py2+=2,py3+=2,py4+=2),px1>width&&(cx-=3,px1-=2,px2-=2,px3-=2,px4-=2),px1<0&&(cx+=3,px1+=2,px2+=2,px3+=2,px4+=2),py1>height&&(cy-=3,py1-=2,py2-=2,py3-=2,py4-=2),py1<0&&(cy+=3,py1+=2,py2+=2,py3+=2,py4+=2)),1===e&&(-1===controlMode2&&(px2=px1,py2=py1,onFloor2=!1,fall2=0,jump=0),0===controlMode2&&(doLegRot2=!1,keyp2.u=!1,keyp2.l=!1,keyp2.r=!1,keyp2.d=!1,keyIsDown(73)&&(keyp2.u=!0),keyIsDown(75)&&(keyp2.d=!0),keyIsDown(74)&&(keyp2.l=!0,doLegRot2=!0),keyIsDown(76)&&(keyp2.r=!0,doLegRot2=!0),keyIsDown(49)&&(paused=!0)),keyp2.l&&(px2-=2),keyp2.r&&(px2+=2),keyp2.l&&onFloor2&&(dir2="left"),keyp2.r&&onFloor2&&(dir2="right"),2===controlMode2&&(keyp1.l=!1,keyp1.r=!1,p2.stick.lx>deadzone.inner&&onFloor2&&(dir2="right"),p2.stick.lx<deadzone.inner-2*deadzone.inner&&onFloor2&&(dir2="left"),p2.stick.lx>.2||p2.stick.lx<deadzone.inner-2*deadzone.inner?(doLegRot2=!0,px2+=2*p2.stick.lx):doLegRot2=!1,p2.button.cross?keyp2.u=!0:keyp2.u=!1),3===controlMode2&&(keyp2.l=!1,keyp2.r=!1,p2.button.left&&(keyp2.l=!0),p2.button.right&&(keyp2.r=!0),p2.button.right&&onFloor2&&(dir2="right"),p2.button.left&&onFloor2&&(dir2="left"),doLegRot2=!(!p2.button.right&&!p2.button.left),p2.button.cross?keyp2.u=!0:keyp2.u=!1,p2.button.options&&(paused=!0)),"left"===dir2&&(rot2-=5),"right"===dir2&&(rot2+=5),rot2>60&&(rot2=60),rot2<-60&&(rot2=-60),doLegRot2?(legRot2>30&&(legRotTF2=!1),legRot2<-30&&(legRotTF2=!0),legRotTF2&&(legRot2+=2),!1===legRotTF2&&(legRot2-=2)):(legRot2>0&&(legRot2-=2),legRot2<0&&(legRot2+=2)),keyp2.l&&keyp2.r?(rot2<0&&(rot2-=5),rot2>0&&(rot2+=5),doLegRot2=!1):doLegRot2=!0,keyp2.u&&onFloor2&&(jump2=5,onFloor2=!1,fall2=0),onFloor2&&!1===keyp1.u&&(fall2=0,jump2=0),!1===onFloor2&&(fall2+=.1),py2+=fall2,(py2-=jump2)<-50&&(px2=px1,py2=py1,onFloor2=!1,fall2=0),py2>height+100&&(px2=px1,py2=py1,onFloor2=!1,fall2=0),px2>width+50&&(px2=px1,py2=py1,onFloor2=!1,fall2=0),px2<-50&&(px2=px1,py2=py1,onFloor2=!1,fall2=0)),2===e&&(-1===controlMode3&&(px3=px1,py3=py1,onFloor3=!1,fall3=0,jump3=0),0===controlMode3&&(doLegRot3=!1,keyp3.u=!1,keyp3.l=!1,keyp3.r=!1,keyp3.d=!1,keyIsDown(38)&&(keyp3.u=!0),keyIsDown(40)&&(keyp3.d=!0),keyIsDown(37)&&(keyp3.l=!0,doLegRot3=!0),keyIsDown(39)&&(keyp3.r=!0,doLegRot3=!0),keyIsDown(50)&&(paused=!0)),keyp3.l&&(px3-=2),keyp3.r&&(px3+=2),keyp3.l&&onFloor3&&(dir3="left"),keyp3.r&&onFloor3&&(dir3="right"),2===controlMode3&&(keyp3.l=!1,keyp3.r=!1,p3.stick.lx>deadzone.inner&&onFloor3&&(dir3="right"),p3.stick.lx<deadzone.inner-2*deadzone.inner&&onFloor3&&(dir3="left"),p3.stick.lx>.2||p3.stick.lx<deadzone.inner-2*deadzone.inner?(doLegRot3=!0,px3+=2*p3.stick.lx):doLegRot3=!1,p3.button.cross?keyp3.u=!0:keyp3.u=!1,p3.button.options&&(paused=!0)),3===controlMode1&&(keyp3.l=!1,keyp3.r=!1,p3.button.left&&(keyp3.l=!0),p3.button.right&&(keyp3.r=!0),p3.button.right&&onFloor3&&(dir3="right"),p3.button.left&&onFloor3&&(dir3="left"),doLegRot3=!(!p3.button.right&&!p3.button.left),p3.button.cross?keyp3.u=!0:keyp3.u=!1,p3.button.options&&(paused=!0)),"left"===dir3&&(rot3-=5),"right"===dir3&&(rot3+=5),rot3>60&&(rot3=60),rot3<-60&&(rot3=-60),doLegRot3?(legRot3>30&&(legRotTF3=!1),legRot3<-30&&(legRotTF3=!0),legRotTF3&&(legRot3+=2),!1===legRotTF3&&(legRot3-=2)):(legRot3>0&&(legRot3-=2),legRot3<0&&(legRot3+=2)),keyp3.l&&keyp3.r?(rot3<0&&(rot3-=5),rot3>0&&(rot3+=5),doLegRot3=!1):doLegRot3=!0,keyp3.u&&onFloor3&&(jump3=5,onFloor3=!1,fall3=0),onFloor3&&!1===keyp3.u&&(fall3=0,jump3=0),!1===onFloor3&&(fall3+=.1),py3+=fall3,(py3-=jump3)<-50&&(px2=px1,py2=py1,onFloor3=!1,fall3=0,jump3=0),py3>height+100&&(px3=px1,py3=py1,onFloor3=!1,fall3=0,jump3=0),px3>width+50&&(px3=px2,py3=py1,onFloor3=!1,fall3=0,jump3=0),px3<-50&&(px3=px1,py3=py1,onFloor3=!1,fall3=0,jump3=0)),3===e&&(-1===controlMode4&&(px4=px1,py4=py1,onFloor4=!1,fall4=!1,jump4=0),0===controlMode4&&(doLegRot4=!1,keyp4.u=!1,keyp4.l=!1,keyp4.r=!1,keyp4.d=!1,keyIsDown(84)&&(keyp4.u=!0),keyIsDown(71)&&(keyp4.d=!0),keyIsDown(70)&&(keyp4.l=!0,doLegRot4=!0),keyIsDown(72)&&(keyp4.r=!0,doLegRot4=!0),keyIsDown(51)&&(paused=!0)),keyp4.l&&(px4-=2),keyp4.r&&(px4+=2),keyp4.l&&onFloor4&&(dir4="left"),keyp4.r&&onFloor4&&(dir4="right"),2===controlMode4&&(keyp4.l=!1,keyp4.r=!1,p4.stick.lx>deadzone.inner&&onFloor4&&(dir4="right"),p4.stick.lx<deadzone.inner-2*deadzone.inner&&onFloor4&&(dir4="left"),p4.stick.lx>.2||p4.stick.lx<deadzone.inner-2*deadzone.inner?(doLegRot4=!0,px4+=2*p4.stick.lx):doLegRot4=!1,p4.button.cross?keyp4.u=!0:keyp4.u=!1,p4.button.options&&(paused=!0)),3===controlMode4&&(keyp4.l=!1,keyp4.r=!1,p4.button.left&&(keyp4.l=!0),p4.button.right&&(keyp4.r=!0),p4.button.right&&onFloor4&&(dir4="right"),p4.button.left&&onFloor4&&(dir4="left"),doLegRot4=!(!p4.button.right&&!p4.button.left),p4.button.cross?keyp4.u=!0:keyp4.u=!1,p4.button.options&&(paused=!0)),"left"===dir4&&(rot4-=5),"right"===dir4&&(rot4+=5),rot4>60&&(rot4=60),rot4<-60&&(rot4=-60),doLegRot4?(legRot4>30&&(legRotTF4=!1),legRot4<-30&&(legRotTF4=!0),legRotTF4&&(legRot4+=2),!1===legRotTF4&&(legRot4-=2)):(legRot4>0&&(legRot4-=2),legRot4<0&&(legRot4+=2)),keyp4.l&&keyp4.r?(rot4<0&&(rot4-=5),rot4>0&&(rot4+=5),doLegRot4=!1):doLegRot4=!0,keyp4.u&&onFloor4&&(jump4=5,onFloor4=!1,fall4=0),onFloor4&&!1===keyp4.u&&(fall4=0,jump4=0),!1===onFloor4&&(fall4+=.1),py4+=fall4,(py4-=jump4)<-50&&(px4=px1,py4=py1,onFloor4=!1,fall4=0,jump4=0),py4>height+100&&(px4=px1,py4=py1,onFloor4=!1,fall4=0,jump4=0),px4>width+50&&(px4=px2,py4=py1,onFloor4=!1,fall4=0,jump4=0),px4<-50&&(px4=px1,py4=py1,onFloor4=!1,fall4=0,jump4=0))}function platform(e,o,t){stroke(0),strokeWeight(3),line(e+cx,o+cy,e+t+cx,o+cy),noStroke(),px1>e-5+cx&&px1<e+t+5+cx&&py1>o-37+cy&&py1<o+2+cy&&(px1>e+cx&&px1<e+t+cx&&(py1=cy+o-35,onFloor1=!0),(px1<e+cx||px1>e+t+cx)&&(onFloor1=!1)),px2>e-5+cx&&px2<e+t+5+cx&&py2>o-37+cy&&py2<o+2+cy&&(px2>e+cx&&px2<e+t+cx&&(py2=cy+o-35,onFloor2=!0),(px2<e+cx||px2>e+t+cx)&&(onFloor2=!1)),px3>e-5+cx&&px3<e+t+5+cx&&py3>o-37+cy&&py3<o+2+cy&&(px3>e+cx&&px3<e+t+cx&&(py3=cy+o-35,onFloor3=!0),(px3<e+cx||px3>e+t+cx)&&(onFloor3=!1)),px4>e-5+cx&&px4<e+t+5+cx&&py4>o-37+cy&&py4<o+2+cy&&(px4>e+cx&&px4<e+t+cx&&(py4=cy+o-35,onFloor4=!0),(px4<e+cx||px4>e+t+cx)&&(onFloor4=!1));for(var n=0;n<enemies.length;n++)enemies[n].x>e-5&&enemies[n].x<e+t+5&&enemies[n].y>o-52&&enemies[n].y<o+2&&(enemies[n].x>e&&enemies[n].x<e+t&&(enemies[n].y=o-50,enemies[n].onFloor=!0),(enemies[n].x<e||enemies[n].x>e+t)&&(enemies[n].onFloor=!1))}function wall(e,o,t){stroke(0),line(e+cx,o+cy,e+cx,o+t+cy),noStroke(),py1>o+cy&&py1<o+t+cy&&(px1>e-15+cx&&px1<e+cx&&(0!==controlMode1&&3!==controlMode1||((!1===keyp1.u&&!1===keyp1.d||keyp1.u&&keyp1.d||p1.button.up&&p1.button.down||!1===p1.button.up||!1===p1.button.down)&&(fall1=1.5),(keyp1.u&&!1===keyp1.d||p1.button.up&&!1===p1.button.down)&&(fall1=1),(keyp1.d&&!1===keyp1.u||p1.button.down&&!1===p1.button.up)&&(fall1=2),(keyp1.u||keyp1.r||keyp1.u&&!1===keyp1.l)&&(px1=e-14+cx,jump1=0,fall1=1.5),!1===keyp1.r&&keyp1.l&&keyp1.u&&(jump1=5)),2===controlMode1&&(!1===keyp1.u&&(px1=e-10+cx,jump1=0,fall1=1.5+p1.stick.ly/2),(keyp1.u&&p1.stick.lx>deadzone.inner||keyp1.u&&p1.stick.lx>deadzone.inner-2*deadzone.inner)&&(px1=e-14+cx,jump1=0,fall1=1.5),p1.stick.lx<deadzone.inner&&p1.stick.lx<deadzone.inner-2*deadzone.inner&&keyp1.u&&(jump1=5)),dir1="left",doLegRot1=!1),px1>e+cx&&px1<e+15+cx&&(0!==controlMode1&&3!==controlMode1||((!1===keyp1.u&&!1===keyp1.d||keyp1.u&&keyp1.d||p1.button.up&&p1.button.down||!1===p1.button.up||!1===p1.button.down)&&(fall1=1.5),(keyp1.u&&!1===keyp1.d||p1.button.up&&!1===p1.button.down)&&(fall1=1),(keyp1.d&&!1===keyp1.u||p1.button.down&&!1===p1.button.up)&&(fall1=2),(keyp1.u||keyp1.l||keyp1.u&&!1===keyp1.r)&&(px1=e+14+cx,jump1=0,fall1=1.5),!1===keyp1.l&&keyp1.r&&keyp1.u&&(jump1=5)),2===controlMode1&&(!1===keyp1.u&&(px1=e+10+cx,jump1=0,fall1=1.5+p1.stick.ly/2),(keyp1.u&&p1.stick.lx<deadzone.inner-2*deadzone.inner||keyp1.u&&p1.stick.lx<deadzone.inner)&&(px1=e+14+cx,jump1=0,fall1=1.5),p1.stick.lx>deadzone.inner-2*deadzone.inner&&p1.stick.lx>deadzone.inner&&keyp1.u&&(jump1=5)),dir1="right",doLegRot1=!1)),py2>o+cy&&py2<o+t+cy&&(px2>e-15+cx&&px2<e+cx&&(0!==controlMode2&&3!==controlMode2||((!1===keyp2.u&&!1===keyp2.d||keyp2.u&&keyp2.d||p2.button.up&&p2.button.down||!1===p2.button.up||!1===p2.button.down)&&(fall2=1.5),(keyp2.u&&!1===keyp2.d||p2.button.up&&!1===p2.button.down)&&(fall2=1),(keyp2.d&&!1===keyp2.u||p2.button.down&&!1===p2.button.up)&&(fall2=2),(keyp2.u||keyp2.r||keyp2.u&&!1===keyp2.l)&&(px2=e-14+cx,jump2=0,fall2=1.5),!1===keyp2.r&&keyp2.l&&keyp2.u&&(jump2=5)),2===controlMode2&&(!1===keyp2.u&&(px2=e-10+cx,jump2=0,fall2=1.5+p2.stick.ly/2),(keyp2.u&&p2.stick.lx>deadzone.inner||keyp2.u&&p2.stick.lx>deadzone.inner-2*deadzone.inner)&&(px2=e-14+cx,jump2=0,fall2=1.5),p2.stick.lx<deadzone.inner&&p2.stick.lx<deadzone.inner-2*deadzone.inner&&keyp2.u&&(jump2=5)),dir2="left",doLegRot2=!1),px2>e+cx&&px2<e+15+cx&&(0!==controlMode2&&3!==controlMode2||((!1===keyp2.u&&!1===keyp2.d||keyp2.u&&keyp2.d||p2.button.up&&p2.button.down||!1===p2.button.up||!1===p2.button.down)&&(fall2=1.5),(keyp2.u&&!1===keyp2.d||p2.button.up&&!1===p2.button.down)&&(fall2=1),(keyp2.d&&!1===keyp2.u||p2.button.down&&!1===p2.button.up)&&(fall2=2),(keyp2.u||keyp2.l||keyp2.u&&!1===keyp2.r)&&(px2=e+14+cx,jump2=0,fall2=1.5),!1===keyp2.l&&keyp2.r&&keyp2.u&&(jump2=5)),2===controlMode2&&(!1===keyp2.u&&(px2=e+10+cx,jump2=0,fall2=1.5+p2.stick.ly/2),(keyp2.u&&p2.stick.lx<deadzone.inner-2*deadzone.inner||keyp2.u&&p2.stick.lx<deadzone.inner)&&(px2=e+14+cx,jump2=0,fall2=1.5),p2.stick.lx>deadzone.inner-2*deadzone.inner&&p2.stick.lx>deadzone.inner&&keyp2.u&&(jump2=5)),dir2="right",doLegRot2=!1)),py3>o+cy&&py3<o+t+cy&&(px3>e-15+cx&&px3<e+cx&&(0!==controlMode3&&3!==controlMode3||((!1===keyp3.u&&!1===keyp3.d||keyp3.u&&keyp3.d||p3.button.up&&p3.button.down||!1===p3.button.up||!1===p3.button.down)&&(fall3=1.5),(keyp3.u&&!1===keyp3.d||p3.button.up&&!1===p3.button.down)&&(fall3=1),(keyp3.d&&!1===keyp3.u||p3.button.down&&!1===p3.button.up)&&(fall3=2),(keyp3.u||keyp3.r||keyp3.u&&!1===keyp3.l)&&(px3=e-14+cx,jump3=0,fall3=1.5),!1===keyp3.r&&keyp3.l&&keyp3.u&&(jump3=5)),2===controlMode3&&(!1===keyp3.u&&(px3=e-10+cx,jump3=0,fall3=1.5+p3.stick.ly/2),(keyp3.u&&p3.stick.lx>deadzone.inner||keyp3.u&&p3.stick.lx>deadzone.inner-2*deadzone.inner)&&(px3=e-14+cx,jump3=0,fall3=1.5),p3.stick.lx<deadzone.inner&&p3.stick.lx<deadzone.inner-2*deadzone.inner&&keyp3.u&&(jump3=5)),dir3="left",doLegRot3=!1),px3>e+cx&&px3<e+15+cx&&(0!==controlMode3&&3!==controlMode3||((!1===keyp3.u&&!1===keyp3.d||keyp3.u&&keyp3.d||p3.button.up&&p3.button.down||!1===p3.button.up||!1===p3.button.down)&&(fall3=1.5),(keyp3.u&&!1===keyp3.d||p3.button.up&&!1===p3.button.down)&&(fall3=1),(keyp3.d&&!1===keyp3.u||p3.button.down&&!1===p3.button.up)&&(fall3=2),(keyp3.u||keyp3.l||keyp3.u&&!1===keyp3.r)&&(px3=e+14+cx,jump3=0,fall3=1.5),!1===keyp3.l&&keyp3.r&&keyp3.u&&(jump3=5)),2===controlMode3&&(!1===keyp3.u&&(px3=e+10+cx,jump3=0,fall3=1.5+p3.stick.ly/2),(keyp3.u&&p3.stick.lx<deadzone.inner-2*deadzone.inner||keyp3.u&&p3.stick.lx<deadzone.inner)&&(px3=e+14+cx,jump3=0,fall3=1.5),p3.stick.lx>deadzone.inner-2*deadzone.inner&&p3.stick.lx>deadzone.inner&&keyp3.u&&(jump3=5)),dir3="right",doLegRot3=!1)),py4>o+cy&&py4<o+t+cy&&(px4>e-15+cx&&px4<e+cx&&(0!==controlMode4&&3!==controlMode4||((!1===keyp4.u&&!1===keyp4.d||keyp4.u&&keyp4.d||p4.button.up&&p4.button.down||!1===p4.button.up||!1===p4.button.down)&&(fall4=1.5),(keyp4.u&&!1===keyp4.d||p4.button.up&&!1===p4.button.down)&&(fall4=1),(keyp4.d&&!1===keyp4.u||p4.button.down&&!1===p4.button.up)&&(fall4=2),(keyp4.u||keyp4.r||keyp4.u&&!1===keyp4.l)&&(px4=e-14+cx,jump4=0,fall4=1.5),!1===keyp4.r&&keyp4.l&&keyp4.u&&(jump4=5)),2===controlMode4&&(!1===keyp4.u&&(px4=e-10+cx,jump4=0,fall4=1.5+p4.stick.ly/2),(keyp4.u&&p4.stick.lx>deadzone.inner||keyp4.u&&p4.stick.lx>deadzone.inner-2*deadzone.inner)&&(px4=e-14+cx,jump4=0,fall4=1.5),p4.stick.lx<deadzone.inner&&p4.stick.lx<deadzone.inner-2*deadzone.inner&&keyp4.u&&(jump4=5)),dir4="left",doLegRot1=!1),px4>e+cx&&px4<e+15+cx&&(0!==controlMode4&&3!==controlMode4||((!1===keyp4.u&&!1===keyp4.d||keyp4.u&&keyp4.d||p4.button.up&&p4.button.down||!1===p4.button.up||!1===p4.button.down)&&(fall4=1.5),(keyp4.u&&!1===keyp4.d||p4.button.up&&!1===p4.button.down)&&(fall4=1),(keyp4.d&&!1===keyp4.u||p4.button.down&&!1===p4.button.up)&&(fall4=2),(keyp4.u||keyp4.l||keyp4.u&&!1===keyp4.r)&&(px4=e+14+cx,jump4=0,fall4=1.5),!1===keyp4.l&&keyp4.r&&keyp4.u&&(jump4=5)),2===controlMode4&&(!1===keyp4.u&&(px4=e+10+cx,jump4=0,fall4=1.5+p4.stick.ly/2),(keyp4.u&&p4.stick.lx<deadzone.inner-2*deadzone.inner||keyp4.u&&p4.stick.lx<deadzone.inner)&&(px4=e+14+cx,jump4=0,fall4=1.5),p4.stick.lx>deadzone.inner-2*deadzone.inner&&p4.stick.lx>deadzone.inner&&keyp4.u&&(jump4=5)),dir4="right",doLegRot1=!1))}function spikes(e,o,t){fill(96,144,88);for(var n=0;n<t;n+=10)triangle(e+cx+n,o+cy,e+10+cx+n,o+cy,e+5+cx+n,o-10+cy);isDark&&(fill(56,72,44,128),rectMode(CORNERS),rect(e+cx,o-15+cy,e+t+cx,o+cy)),stroke(0),strokeWeight(3),line(e+cx,o+cy,e+t+cx,o+cy),noStroke(),px1>e+cx&&px1<e+t+cx&&py1>o-10+cy&&py1<o+cy&&(scene=-1,1===soundRand&&sounds.kill.spike0.play(),2===soundRand&&sounds.kill.spike1.play(),3===soundRand&&sounds.kill.spike2.play()),px2>e+cx&&px2<e+t+cx&&py2>o-10+cy&&py2<o+cy&&(px2=px1,py2=py1,1===soundRand&&sounds.kill.spike0.play(),2===soundRand&&sounds.kill.spike1.play(),3===soundRand&&sounds.kill.spike2.play()),px3>e+cx&&px3<e+t+cx&&py3>o-10+cy&&py3<o+cy&&(px3=px1,py3=py1,1===soundRand&&sounds.kill.spike0.play(),2===soundRand&&sounds.kill.spike1.play(),3===soundRand&&sounds.kill.spike2.play()),px4>e+cx&&px4<e+t+cx&&py4>o-10+cy&&py4<o+cy&&(px4=px1,py4=py1,1===soundRand&&sounds.kill.spike0.play(),2===soundRand&&sounds.kill.spike1.play(),3===soundRand&&sounds.kill.spike2.play())}function door(e,o){fill(255),rect(e+cx-5,o+cy-5,70,85),fill(99,36,36),rect(e+cx,o+cy,60,80),fill(255,255,0),ellipse(e+cx+50,o+40+cy,15,15),px1>e+cx&&py1>o+cy&&px1<e+cx+60&&py1<o+80+cy&&(init=!0,scene+=1,cx=0,cy=0,levelStart.x=px1,levelStart.y=py1,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,score1.levelScore=score1.score,score2.levelScore=score2.score,score3.levelScore=score3.score,score4.levelScore=score4.score)}function assets(){for(var e=0;e<coins.length;e++)"yellow"===coins[e].type&&(coins[e].visible&&(fill(223,223,0),ellipse(coins[e].x+cx,coins[e].y+cy,30,30),fill(255,255,0),ellipse(coins[e].x+cx,coins[e].y+cy,25,25),isDark&&(fill(255,255,0,64),ellipse(coins[e].x+cx,coins[e].y+cy,50,50)),"true"===getCookie("dev")&&(rectMode(CORNERS),stroke(255,255,0),fill(255,255,0,64),rect(coins[e].x-50+cx,coins[e].y-50+cy,coins[e].x+50+cx,coins[e].y+50+cy),noStroke())),px1>coins[e].x-50+cx&&px1<coins[e].x+50+cx&&py1>coins[e].y-50+cy&&py1<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score1.score+=100,coins[e].visible=!1)),px2>coins[e].x-50+cx&&px2<coins[e].x+50+cx&&py2>coins[e].y-50+cy&&py2<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score2.score+=100,coins[e].visible=!1)),px3>coins[e].x-50+cx&&px3<coins[e].x+50+cx&&py3>coins[e].y-50+cy&&py3<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score3.score+=100,coins[e].visible=!1)),px4>coins[e].x-50+cx&&px4<coins[e].x+50+cx&&py4>coins[e].y-50+cy&&py4<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score4.score+=100,coins[e].visible=!1,sounds.yellow.play()))),"blue"===coins[e].type&&(coins[e].visible&&(fill(0,0,223),ellipse(coins[e].x+cx,coins[e].y+cy,30,30),fill(0,0,255),ellipse(coins[e].x+cx,coins[e].y+cy,25,25),isDark&&(fill(0,0,255,64),ellipse(coins[e].x+cx,coins[e].y+cy,50,50)),"true"===getCookie("dev")&&(rectMode(CORNERS),stroke(0,0,255),fill(0,0,255,64),rect(coins[e].x-50+cx,coins[e].y-50+cy,coins[e].x+50+cx,coins[e].y+50+cy),noStroke())),px1>coins[e].x-50+cx&&px1<coins[e].x+50+cx&&py1>coins[e].y-50+cy&&py1<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score1.score+=200,coins[e].visible=!1)),px2>coins[e].x-50+cx&&px2<coins[e].x+50+cx&&py2>coins[e].y-50+cy&&py2<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score2.score+=200,coins[e].visible=!1)),px3>coins[e].x-50+cx&&px3<coins[e].x+50+cx&&py3>coins[e].y-50+cy&&py3<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score3.score+=200,coins[e].visible=!1)),px4>coins[e].x-50+cx&&px4<coins[e].x+50+cx&&py4>coins[e].y-50+cy&&py4<coins[e].y+50+cy&&(coins[e].collected=!0,coins[e].collected&&coins[e].visible&&(score4.score+=200,coins[e].visible=!1,sounds.blue.play())));for(e=0;e<enemies.length;e++)"left"===enemies[e].type&&!1===enemies[e].dead&&(noStroke(),fill(140,5,43),ellipse(enemies[e].x+cx,enemies[e].y+25+cy,50,50),fill(70,50,43),ellipse(enemies[e].x+cx,enemies[e].y+25+cy,35,35),noFill(),stroke(140,5,43),push(),translate(enemies[e].x+cx,enemies[e].y+25+cy),rotate(radians(enemies[e].rot)),arc(0,40,60,60,radians(247.5),radians(292.5)),strokeWeight(5),point(-25/3,-6.25),point(25/3,-6.25),pop(),!1===paused&&(!1===enemies[e].onFloor&&(enemies[e].dir+=1,enemies[e].fall+=.1),enemies[e].onFloor&&(enemies[e].fall=0),enemies[e].x-=1.5,enemies[e].y+=enemies[e].fall,enemies[e].rot-=2)),"right"===enemies[e].type&&!1===enemies[e].dead&&(noStroke(),fill(140,5,43),ellipse(enemies[e].x+cx,enemies[e].y+25+cy,50,50),fill(70,50,43),ellipse(enemies[e].x+cx,enemies[e].y+25+cy,35,35),noFill(),stroke(140,5,43),push(),translate(enemies[e].x+cx,enemies[e].y+25+cy),rotate(radians(enemies[e].rot)),arc(0,40,60,60,radians(247.5),radians(292.5)),strokeWeight(5),point(-25/3,-6.25),point(25/3,-6.25),pop(),!1===paused&&(!1===enemies[e].onFloor&&(enemies[e].dir+=1,enemies[e].fall+=.1),enemies[e].onFloor&&(enemies[e].fall=0),enemies[e].x+=1.5,enemies[e].y+=enemies[e].fall,enemies[e].rot+=2)),"patrol"===enemies[e].type&&!1===enemies[e].dead&&(noStroke(),fill(140,5,43),ellipse(enemies[e].x+cx,enemies[e].y+25+cy,50,50),fill(70,50,43),ellipse(enemies[e].x+cx,enemies[e].y+25+cy,35,35),noFill(),stroke(140,5,43),push(),translate(enemies[e].x+cx,enemies[e].y+25+cy),rotate(radians(enemies[e].rot)),arc(0,40,60,60,radians(247.5),radians(292.5)),strokeWeight(5),point(-25/3,-6.25),point(25/3,-6.25),pop(),!1===paused&&(!1===enemies[e].onFloor&&(enemies[e].fall+=.1),enemies[e].onFloor&&(enemies[e].fall=0),enemies[e].y+=enemies[e].fall,0===enemies[e].dir&&(enemies[e].x+=1.5),1===enemies[e].dir&&(enemies[e].x-=1.5),(enemies[e].x<enemies[e].trigger.left||enemies[e].x>enemies[e].trigger.right)&&(enemies[e].dir+=1),enemies[e].dir>1&&(enemies[e].dir=0),0===enemies[e].dir&&(enemies[e].rot+=2),1===enemies[e].dir&&(enemies[e].rot-=2))),!1===enemies[e].dead&&(px1>enemies[e].x+cx-25&&px1<enemies[e].x+cx+25&&py1>enemies[e].y+cy-30&&py1<enemies[e].y+cy+30&&(scene=-1),px1>enemies[e].x+cx-25&&px1<enemies[e].x+cx+25&&py1>enemies[e].y+cy-40&&py1<enemies[e].y+cy-30&&(enemies[e].dead=!0,enemies[e].killer=1),px2>enemies[e].x+cx-25&&px2<enemies[e].x+cx+25&&py2>enemies[e].y+cy-30&&py2<enemies[e].y+cy+30&&-1!==controlMode2&&(px2=px1,py2=py1,fall2=0,jump2=0,onFloor2=!1),px2>enemies[e].x+cx-25&&px2<enemies[e].x+cx+25&&py2>enemies[e].y+cy-40&&py2<enemies[e].y+cy-30&&-1!==controlMode2&&(enemies[e].dead=!0,enemies[e].killer=2),px3>enemies[e].x+cx-25&&px3<enemies[e].x+cx+25&&py3>enemies[e].y+cy-30&&py3<enemies[e].y+cy+30&&-1!==controlMode2&&(px3=px1,py3=py1,fall3=0,jump3=0,onFloor3=!1),px3>enemies[e].x+cx-25&&px3<enemies[e].x+cx+25&&py3>enemies[e].y+cy-40&&py3<enemies[e].y+cy-30&&-1!==controlMode2&&(enemies[e].dead=!0,enemies[e].killer=3),px4>enemies[e].x+cx-25&&px4<enemies[e].x+cx+25&&py4>enemies[e].y+cy-30&&py4<enemies[e].y+cy+30&&-1!==controlMode2&&(px4=px1,py4=py1,fall4=0,jump4=0,onFloor4=!1),px4>enemies[e].x+cx-25&&px4<enemies[e].x+cx+25&&py4>enemies[e].y+cy-40&&py4<enemies[e].y+cy-30&&-1!==controlMode2&&(enemies[e].dead=!0,enemies[e].killer=4),"true"===getCookie("dev")&&(rectMode(CORNERS),stroke(255,0,0),fill(255,0,0,128),rect(enemies[e].x+cx-25,enemies[e].y+cy-30,enemies[e].x+cx+25,enemies[e].y+cy+30),stroke(0,0,255),fill(0,0,255,128),rect(enemies[e].x+cx-25,enemies[e].y+cy-40,enemies[e].x+cx+25,enemies[e].y+cy-30))),enemies[e].dead&&!1===enemies[e].collected&&(1===enemies[e].killer&&(score1.score+=50,jump1=2.5,fall1=0,onFloor1=!1),2===enemies[e].killer&&(score2.score+=50,jump2=2.5,fall2=0,onFloor2=!1),3===enemies[e].killer&&(score3.score+=50,jump3=2.5,fall3=0,onFloor3=!1),4===enemies[e].killer&&(score4.score+=50,jump4=2.5,fall4=0,onFloor4=!1),enemies[e].collected=!0)}function menu(){init&&(0===music&&(sounds.menu.play(),sounds.menu.loop()),init=!1,px1=83,py1=91,px2=223,py2=91,px3=363,py3=91,px4=503,py4=91,cx=0,cy=0,fall1=0,fall2=0,fall3=0,fallCount4=0,dir1="right",dir2="right",dir3="right",dir4="right"),!1===sounds.menu.isPlaying&&(init=!0),style.innerHTML="body {margin:0px;border:0px;background:rgb(50,50,50);}",isDark?background(25):background(50),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3),keyp1.u&&(jump1=5,onFloor1=!1),keyp2.u&&(jump2=5,onFloor2=!1),keyp3.u&&(jump3=5,onFloor3=!1),keyp4.u&&(jump4=5,onFloor4=!1),onFloor1?(fall1=0,jump1=0,onFloorTF1=!1):fall1+=.1,onFloorTF1&&(onFloor1=!1),onFloor2?(fall2=0,jump2=0,onFloorTF2=!1):fall2+=.1,onFloorTF2&&(onFloor2=!1),onFloor3?(fall3=0,jump3=0,onFloorTF3=!1):fall3+=.1,onFloorTF3&&(onFloor3=!1),onFloor4?(fall4=0,jump4=0,onFloorTF4=!1):fall4+=.1,onFloorTF4&&(onFloor4=!1),py1+=fall1,py1-=jump1,py2+=fall2,py2-=jump2,py3+=fall3,py3-=jump3,py4+=fall4,py4-=jump4,platform(0,100,width),jumpRand1+=random(.25,1)/2,jumpRand2+=random(.25,1)/4,jumpRand3+=random(.5,1)/2,jumpRand4+=random(.25,1)/3,jumpRand1>10&&jumpRand1<50&&(keyp1.u=!1),jumpRand1>150&&(keyp1.u=!0,jumpRand1=0),jumpRand2>10&&jumpRand2<50&&(keyp2.u=!1),jumpRand2>150&&(keyp2.u=!0,jumpRand2=0),jumpRand3>10&&jumpRand3<50&&(keyp3.u=!1),jumpRand3>150&&(keyp3.u=!0,jumpRand3=0),jumpRand4>10&&jumpRand4<50&&(keyp4.u=!1),jumpRand4>150&&(keyp4.u=!0,jumpRand4=0),legRot1=0,rot1=60,dir1="right",legRot2=0,rot2=60,dir2="right",legRot3=0,rot3=60,dir3="right",legRot4=0,rot4=60,dir4="right",noFill(),rectMode(CENTER),stroke(0),1===selectedButton&&stroke(255),rect(width/3,height/3,200,100,5),stroke(0),2===selectedButton&&stroke(255),0===maxLevel&&rect(2*width/3,height/3,200,100,5),maxLevel>0&&rect(width/3,2*height/3,200,100,5),stroke(0),3===selectedButton&&stroke(255),0===maxLevel&&rect(width/2,2*height/3,200,100,5),maxLevel>0&&rect(2*width/3,2*height/3,200,100,5),stroke(0),4===selectedButton&&stroke(255),maxLevel>0&&rect(2*width/3,height/3,200,100,5),stroke(0),5===selectedButton&&stroke(255),rect(width/5,height/5,50,50,5),textAlign(CENTER,CENTER),fill(255),textSize(40),noStroke(),0===maxLevel&&(text("Play!",width/3,height/3),text("Back",2*width/3,height/3),text("Settings",width/2,2*height/3)),maxLevel>0&&(text("Play!",width/3,height/3),textSize(30),text("Play from\nbeginning!",2*width/3,height/3),textSize(40),text("Back",width/3,2*height/3),text("Settings",2*width/3,2*height/3)),textSize(15),text("Full\nscreen",width/5,height/5),0===controlMode1&&(selectedButton=0,mouseX>width/3-100&&mouseY>height/3-50&&mouseX<width/3+100&&mouseY<height/3+50&&(selectedButton=1,cursor(HAND)),mouseX>width/3*2-100&&mouseY>height/3-50&&mouseX<width/3*2+100&&mouseY<height/3+50&&(0===maxLevel&&(selectedButton=2),maxLevel>0&&(selectedButton=4),cursor(HAND)),mouseX>width/2-100&&mouseY>2*height/3-50&&mouseX<width/2+100&&mouseY<2*height/3+50&&0===maxLevel&&(selectedButton=3,cursor(HAND)),mouseX>width/5-25&&mouseY>height/5-25&&mouseX<width/5+25&&mouseY<height/5+25&&(selectedButton=5,cursor(HAND)),mouseX>width/3-100&&mouseY>height/3-50&&mouseX<width/3+100&&mouseY<height/3+50&&mouseIsPressed&&(0===maxLevel&&(scene=1,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0),maxLevel>0&&(scene=maxLevel,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0,px1=levelStart.x,py1=levelStart.y,px2=levelStart.x,py2=levelStart.y,px3=levelStart.x,py3=levelStart.y,px4=levelStart.x,py4=levelStart.y,score1.score=score1.levelScore,score2.score=score2.levelScore,score3.score=score3.levelScore,score4.score=score4.levelScore)),mouseX>width/3*2-100&&mouseY>height/3-50&&mouseX<width/3*2+100&&mouseY<height/3+50&&mouseIsPressed&&(0===maxLevel&&(window.location.href="https://turnoffthetv.github.io/programs/"),maxLevel>0&&(scene=1,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,init=!0),selectedButton=0),mouseX>width/2-100&&mouseY>2*height/3-50&&mouseX<width/2+100&&mouseY<2*height/3+50&&0===maxLevel&&mouseIsPressed&&(scene=.5,selectedButton=0),mouseX>2*width/3-100&&mouseY>2*height/3-50&&mouseX<width/2+100&&mouseY<2*height/3+50&&maxLevel>0&&mouseIsPressed&&(scene=.5,selectedButton=0),mouseX>width/3-100&&mouseY>2*height/3-50&&mouseX<width/2+100&&mouseY<2*height/3+50&&maxLevel>0&&mouseIsPressed&&(window.location.href="https://turnoffthetv.github.io/programs/",selectedButton=0),mouseX>width/5-25&&mouseY>height/5-25&&mouseX<width/5+25&&mouseY<height/5+25&&mouseIsPressed&&fullscreen(!fullscreen())),2===controlMode1&&(0===level&&(p1.stick.lx<deadzone.inner-2*deadzone.inner&&(selectedButton=1),p1.stick.lx>deadzone.inner&&(selectedButton=2),p1.stick.ly>deadzone.inner&&(selectedButton=3)),level>0&&(1===selectedButton&&p1.stick.lx>deadzone.inner&&(selectedButton=4),1===selectedButton&&p1.stick.ly>deadzone.inner&&(selectedButton=2),2===selectedButton&&p1.stick.lx>deadzone.inner&&(selectedButton=3),2===selectedButton&&p1.stick.ly<deadzone.inner-2*deadzone.inner&&(selectedButton=1),3===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner&&(selectedButton=2),3===selectedButton&&p1.stick.ly<deadzone.inner-2*deadzone.inner&&(selectedButton=4),4===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner&&(selectedButton=1),4===selectedButton&&p1.stick.ly>deadzone.inner&&(selectedButton=3),0===selectedButton&&p1.stick.lx>deadzone.inner&&p1.stick.ly>deadzone.inner&&(selectedButton=3),0===selectedButton&&p1.stick.lx>deadzone.inner&&p1.stick.ly<deadzone.inner-2*deadzone.inner&&(selectedButton=4),0===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner&&p1.stick.ly<deadzone.inner-2*deadzone.inner&&(selectedButton=1),0===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner&&p1.stick.ly>deadzone.inner&&(selectedButton=2)),p1.button.cross&&1===selectedButton&&(0===level&&(scene=1,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0),level>0&&(scene=maxLevel,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0,px1=levelStart.x,py1=levelStart.y,px2=levelStart.x,py2=levelStart.y,px3=levelStart.x,py3=levelStart.y,px4=levelStart.x,py4=levelStart.y)),p1.button.cross&&2===selectedButton&&(window.location.href="https://turnoffthetv.github.io/programs/",selectedButton=0),p1.button.cross&&3===selectedButton&&(scene=.5,selectedButton=8),p1.button.cross&&4===selectedButton&&(scene=1,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0)),3===controlMode1&&(0===level&&(p1.button.left&&(selectedButton=1),p1.button.right&&(selectedButton=2),p1.button.down&&(selectedButton=3)),level>0&&(1===selectedButton&&p1.button.right&&(selectedButton=4),1===selectedButton&&p1.button.right&&(selectedButton=2),2===selectedButton&&p1.button.right&&(selectedButton=3),2===selectedButton&&p1.button.up&&(selectedButton=1),3===selectedButton&&p1.button.left&&(selectedButton=2),3===selectedButton&&p1.button.up&&(selectedButton=4),4===selectedButton&&p1.button.left&&(selectedButton=1),4===selectedButton&&p1.button.down&&(selectedButton=3),0===selectedButton&&p1.button.right&&p1.button.down&&(selectedButton=3),0===selectedButton&&p1.button.right&&p1.button.up&&(selectedButton=4),0===selectedButton&&p1.button.left&&p1.button.up&&(selectedButton=1),0===selectedButton&&p1.button.left&&p1.button.down&&(selectedButton=2)),p1.button.cross&&1===selectedButton&&(scene=1,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0),p1.button.cross&&2===selectedButton&&(window.location.href="https://turnoffthetv.github.io/programs/",selectedButton=0),p1.button.cross&&3===selectedButton&&(scene=.5,selectedButton=0),p1.button.cross&&4===selectedButton&&(scene=maxLevel,onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,selectedButton=0,init=!0,px1=levelStart.x,py1=levelStart.y,px2=levelStart.x,py2=levelStart.y,px3=levelStart.x,py3=levelStart.y,px4=levelStart.x,py4=levelStart.y)),(mouseIsPressed&&!1===sounds.menu.isPlaying()&&0===music||p1.gamepadIsPressed&&!1===sounds.menu.isPlaying()&&0===music)&&sounds.menu.play(),stroke(0),strokeWeight(2),fill(255),textSize(10),textAlign(LEFT,BOTTOM),"true"===getCookie("dev")&&text("Software v. 0.5.5",5,height-5)}function settings(){if(isDark?background(25):background(50),noFill(),stroke(0),1===selectedButton&&stroke(255),rect(width/3,height/3,50,25,5),stroke(0),2===selectedButton&&stroke(255),rect(width/3,height/2,50,25,5),stroke(0),3===selectedButton&&stroke(255),rect(width/3,2*height/3,50,25,5),stroke(0),4===selectedButton&&stroke(255),rect(width/2,height/2,200,100,5),stroke(0),5===selectedButton&&stroke(255),rect(2*width/3,height/3,50,25,5),stroke(0),6===selectedButton&&stroke(255),rect(2*width/3,height/2,50,25,5),stroke(0),7===selectedButton&&stroke(255),rect(2*width/3,2*height/3,50,25,5),stroke(0),8===selectedButton&&stroke(255),rect(width/4,height/7,50,25,5),stroke(0),9===selectedButton&&stroke(255),rect(width/4*3,height/7,50,25,5),fill(255),textSize(40),textAlign(CENTER,CENTER),noStroke(),text("Back",width/2,height/2),text("Inner Deadzone",width/3,height/4),text("Outer Deadzone",2*width/3,height/4),textSize(20),text("0.1",width/3,height/3-3),text("0.2",width/3,height/2-3),text("0.3",width/3,2*height/3-3),text("0.1",2*width/3,height/3-3),text("0.2",2*width/3,height/2-3),text("0.3",2*width/3,2*height/3-3),text("SFX",width/4*3,height/7-3),textSize(18),text("Music",width/4,height/7-3),0===controlMode1){selectedButton=0,mouseX>width/3-25&&mouseX<width/3+25&&mouseY>height/3-12.5&&mouseY<height/3+12.5&&(selectedButton=1,cursor(HAND)),mouseX>width/3-25&&mouseX<width/3+25&&mouseY>height/2-12.5&&mouseY<height/2+12.5&&(selectedButton=2,cursor(HAND)),mouseX>width/3-25&&mouseX<width/3+25&&mouseY>2*height/3-12.5&&mouseY<2*height/3+12.5&&(selectedButton=3,cursor(HAND)),mouseX>width/2-100&&mouseX<width/2+100&&mouseY>height/2-50&&mouseY<height/2+50&&(selectedButton=4,cursor(HAND)),mouseX>2*width/3-25&&mouseX<2*width/3+25&&mouseY>height/3-12.5&&mouseY<height/3+12.5&&(selectedButton=5,cursor(HAND)),mouseX>2*width/3-25&&mouseX<2*width/3+25&&mouseY>height/2-12.5&&mouseY<height/2+12.5&&(selectedButton=6,cursor(HAND)),mouseX>2*width/3-25&&mouseX<2*width/3+25&&mouseY>2*height/3-12.5&&mouseY<2*height/3+12.5&&(selectedButton=7,cursor(HAND)),mouseX>width/4-25&&mouseX<width/4+25&&mouseY>height/7-12.5&&mouseY<height/7+12.5&&(selectedButton=8,cursor(HAND)),mouseX>width/4*3-25&&mouseX<width/4*3+25&&mouseY>height/7-12.5&&mouseY<height/7+12.5&&(selectedButton=9,cursor(HAND)),1===selectedButton&&mouseIsPressed&&(deadzone.inner=.1),2===selectedButton&&mouseIsPressed&&(deadzone.inner=.2),3===selectedButton&&mouseIsPressed&&(deadzone.inner=.3),4===selectedButton&&mouseIsPressed&&(scene=0),5===selectedButton&&mouseIsPressed&&(deadzone.outer=.1),6===selectedButton&&mouseIsPressed&&(deadzone.outer=.2),7===selectedButton&&mouseIsPressed&&(deadzone.outer=.3)}2===controlMode1&&(p1.stick.lx<deadzone.inner-2*deadzone.inner&&p1.stick.ly<deadzone.inner&&(selectedButton=1),p1.stick.lx<deadzone.inner-2*deadzone.inner&&p1.stick.ly<deadzone.inner&&p1.stick.ly>deadzone.inner-2*deadzone.inner&&(selectedButton=2),p1.stick.lx<deadzone.inner-2*deadzone.inner&&p1.stick.ly>deadzone.inner&&(selectedButton=3),p1.stick.lx<deadzone.inner&&p1.stick.lx>deadzone.inner-2*deadzone.inner&&(selectedButton=4),p1.stick.lx>deadzone.inner&&p1.stick.ly<deadzone.inner&&(selectedButton=5),p1.stick.lx>deadzone.inner&&p1.stick.ly<deadzone.inner&&p1.stick.ly>deadzone.inner-2*deadzone.inner&&(selectedButton=6),p1.stick.lx>deadzone.inner&&p1.stick.ly>deadzone.inner&&(selectedButton=7),1===selectedButton&&p1.button.cross&&(deadzone.inner=.1),2===selectedButton&&p1.button.cross&&(deadzone.inner=.2),3===selectedButton&&p1.button.cross&&(deadzone.inner=.3),4===selectedButton&&p1.button.cross&&(scene=0),5===selectedButton&&p1.button.cross&&(deadzone.outer=.1),6===selectedButton&&p1.button.cross&&(deadzone.outer=.1),7===selectedButton&&p1.button.cross&&(deadzone.outer=.1),8===selectedButton&&p1.button.cross&&(music+=1),9===selectedButton&&p1.button.cross&&(sfx+=1)),3===controlMode1&&(selectedButton=0,mouseX>width/3-25&&mouseX<width/3+25&&mouseY>height/3-12.5&&mouseY<height/3+12.5&&(selectedButton=1,cursor(HAND)),mouseX>width/3-25&&mouseX<width/3+25&&mouseY>height/2-12.5&&mouseY<height/2+12.5&&(selectedButton=2,cursor(HAND)),mouseX>width/3-25&&mouseX<width/3+25&&mouseY>2*height/3-12.5&&mouseY<2*height/3+12.5&&(selectedButton=3,cursor(HAND)),mouseX>width/2-100&&mouseX<width/2+100&&mouseY>height/2-50&&mouseY<height/2+50&&(selectedButton=4,cursor(HAND)),mouseX>2*width/3-25&&mouseX<2*width/3+25&&mouseY>height/3-12.5&&mouseY<height/3+12.5&&(selectedButton=5,cursor(HAND)),mouseX>2*width/3-25&&mouseX<2*width/3+25&&mouseY>height/2-12.5&&mouseY<height/2+12.5&&(selectedButton=6,cursor(HAND)),mouseX>2*width/3-25&&mouseX<2*width/3+25&&mouseY>2*height/3-12.5&&mouseY<2*height/3+12.5&&(selectedButton=7,cursor(HAND)),1===selectedButton&&mouseIsPressed&&(deadzone.inner=.1),2===selectedButton&&mouseIsPressed&&(deadzone.inner=.2),3===selectedButton&&mouseIsPressed&&(deadzone.inner=.3),4===selectedButton&&mouseIsPressed&&(scene=0),5===selectedButton&&mouseIsPressed&&(deadzone.outer=.1),6===selectedButton&&mouseIsPressed&&(deadzone.outer=.2),7===selectedButton&&mouseIsPressed&&(deadzone.outer=.3))}function dead(){2!==controlMode1&&3!==controlMode1||(deathRumbleTimer+=1,p1.rumble=deathRumbleTimer<25),sounds.overworld.stop(),sounds.cave.stop(),sounds.clouds.stop(),init=!0,onFloor1=!1,textAlign(CENTER,CENTER),style.innerHTML="body {margin:0px;border:0px;background:rgb(0,0,0);}",background(0),fill(255,0,0),textSize(40),text("You died.",width/2,height/3),noFill(),stroke(255,0,0),rectMode(CENTER),strokeWeight(1),1===selectedButton&&strokeWeight(3),rect(width/3,2*height/3,200,25),strokeWeight(1),2===selectedButton&&strokeWeight(3),rect(2*width/3,2*height/3,255,25),noStroke(),fill(255,0,0),textSize(20),text("Continue",width/3,2*height/3),text("Return to menu",2*width/3,2*height/3),0===controlMode1&&(selectedButton=0,mouseX>width/3-100&&mouseY>2*height/3-12.5&&mouseX<width/3+100&&mouseY<2*height/3+12.5&&(selectedButton=1,cursor(HAND)),mouseX>width/3*2-127.5&&mouseY>2*height/3-12.5&&mouseX<width/3*2+127.5&&mouseY<2*height/3+12.5&&(selectedButton=2,cursor(HAND)),mouseIsPressed&&mouseX>width/3-100&&mouseY>2*height/3-12.5&&mouseX<width/3+100&&mouseY<2*height/3+12.5&&(onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,scene=level,px1=levelStart.x,py1=levelStart.y,px2=px1,py2=py1,px3=px1,py3=py1,px4=px1,py4=py1,cx=0,cy=0,rot1="right",fall1=0,rot1=60,legRot1=0,jump1=0,deathRumbleTimer=0,score1.score=score1.levelScore,score2.score=score2.levelScore,score3.score=score3.levelScore,score4.score=score4.levelScore),mouseIsPressed&&mouseX>width/3*2-127.5&&mouseY>2*height/3-12.5&&mouseX<width/3*2+127.5&&mouseY<2*height/2+12.5&&(scene=0,deathRumbleTimer=0)),2!==controlMode1&&3!==controlMode1||((p1.stick.lx<deadzone.inner-2*deadzone.inner||p1.button.left)&&(selectedButton=1),(p1.stick.lx>deadzone.inner||p1.button.right)&&(selectedButton=2),p1.button.cross&&1===selectedButton&&(onFloor1=!1,onFloor2=!1,onFloor3=!1,onFloor4=!1,scene=level,px1=levelStart.x,py1=levelStart.y,px2=px1,py2=py1,px3=px1,py3=py1,px4=px1,py4=py1,cx=0,cy=0,dir1="right",dir2="right",dir3="right",dir4="right",fall1=0,fall2=0,fall3=0,fall4=0,rot1=60,rot2=60,rot3=60,rot4=60,legRot1=0,legRot2=0,legRot3=0,legRot4=0,selectedButton=0,deathRumbleTimer=0),p1.button.cross&&2===selectedButton&&(scene=0,selectedButton=0,deathRumbleTimer=0))}function pause(){sounds.overworld.stop(),sounds.cave.stop(),sounds.clouds.stop(),fill(0,0,0,127.5),rectMode(CORNER),rect(0,0,width,height),fill(255),textSize(40),textAlign(CENTER,CENTER),text("PAUSED",width/2,height/3),textSize(20),text("Drop out \n Player 2",width/3,height/2),text("Drop out \n Player 3",width/2,height/2),text("Drop out \n Player 4",2*width/3,height/2),text("Menu",width/2,2*height/3),noFill(),stroke(255),rectMode(CENTER),strokeWeight(2),1===selectedButton&&strokeWeight(5),rect(width/3,height/2,100,75,5),strokeWeight(2),2===selectedButton&&strokeWeight(5),rect(width/2,height/2,100,75,5),strokeWeight(2),3===selectedButton&&strokeWeight(5),rect(2*width/3,height/2,100,75,5),strokeWeight(2),4===selectedButton&&strokeWeight(5),rect(width/2,2*height/3,100,75,5),noStroke(),(2===controlMode1&&p1.button.circle||3===controlMode1&&p1.button.circle)&&(paused=!1,0===music&&1===scene&&sounds.overworld.play(),0===music&&2===scene&&sounds.cave.play(),0===music&&3===scene&&sounds.clouds.play()),0===controlMode1&&keyIsDown(27)&&keyIsDown(16)&&(paused=!1,0===music&&sounds.level.play()),0===controlMode1&&(selectedButton=0,mouseX>width/3-50&&mouseX<width/3+50&&mouseY>height/2-37.5&&mouseY<height/2+37.5&&(mouseIsPressed&&(controlMode2=-1),cursor(HAND),selectedButton=1),mouseX>width/2-50&&mouseX<width/2+50&&mouseY>height/2-37.5&&mouseY<height/2+37.5&&(mouseIsPressed&&(controlMode3=-1),cursor(HAND),selectedButton=2),mouseX>2*width/3-50&&mouseX<2*width/3+50&&mouseY>height/2-37.5&&mouseY<height/2+37.5&&(mouseIsPressed&&(controlMode4=-1),cursor(HAND),selectedButton=3),mouseX>width/2-50&&mouseX<width/2+50&&mouseY>2*height/3-37.5&&mouseY<2*height/3+37.5&&(mouseIsPressed&&(scene=0,cx=0,cy=0,px1=89,py1=93,px2=229,py2=93,px3=369,py3=93,px4=509,py4=93,dir1="right",dir2="right",dir3="right",dir4s="right",paused=!1,selectedButton=0),cursor(HAND))),2===controlMode1&&(4!==selectedButton&&p1.stick.ly>deadzone.inner&&(selectedButton=4),4===selectedButton&&p1.stick.ly<deadzone.inner-2*deadzone.inner&&(selectedButton=2),(2===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner||4===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner)&&(selectedButton=1),(2===selectedButton&&p1.stick.lx>deadzone.inner||4===selectedButton&&p1.stick.lx>deadzone.inner)&&(selectedButton=3),1===selectedButton&&p1.stick.lx>deadzone.inner&&(selectedButton=2),3===selectedButton&&p1.stick.lx<deadzone.inner-2*deadzone.inner&&(selectedButton=2),1===selectedButton&&p1.button.cross&&(controlMode2=-1),2===selectedButton&&p1.button.cross&&(controlMode3=-1),3===selectedButton&&p1.button.cross&&(controlMode4=-1),4===selectedButton&&p1.button.cross&&(scene=0,cx=0,cy=0,px1=89,py1=93,px2=229,py2=93,px3=369,py3=93,px4=509,py4=93,dir1="right",dir2="right",dir3="right",dir4s="right",paused=!1,selectedButton=0)),3===controlMode1&&(4!==selectedButton&&p1.button.down&&(selectedButton=4),4===selectedButton&&p1.button.up&&(selectedButton=2),(2===selectedButton&&p1.button.left||4===selectedButton&&p1.button.left)&&(selectedButton=1),(2===selectedButton&&p1.button.right||4===selectedButton&&p1.button.right)&&(selectedButton=3),1===selectedButton&&p1.button.right&&(selectedButton=2),3===selectedButton&&p1.button.left&&(selectedButton=2),1===selectedButton&&p1.button.cross&&(controlMode2=-1),2===selectedButton&&p1.button.cross&&(controlMode3=-1),3===selectedButton&&p1.button.cross&&(controlMode4=-1),4===selectedButton&&p1.button.cross&&(scene=0,cx=0,cy=0,px1=89,py1=93,px2=229,py2=93,px3=369,py3=93,px4=509,py4=93,dir1="right",dir2="right",dir3="right",dir4s="right",paused=!1,selectedButton=0))}function level0(){sounds.menu.stop(),init&&(0===music&&(sounds.overworld.play(),sounds.overworld.loop()),init=!1,coins=[{x:100,y:350,visible:!0,collected:!1,type:"yellow"},{x:600,y:50,visible:!0,collected:!1,type:"yellow"},{x:1050,y:450,visible:!0,collected:!1,type:"blue"}],enemies=[{type:"right",x:200,y:125,onFloor:!1,fall:0,dead:!1,rot:0,collected:!1,killer:0},{type:"patrol",x:400,y:400,onFloor:!1,fall:0,dir:0,dead:!1,trigger:{left:300,right:495},rot:0,collected:!1,killer:0}]),rectMode(CORNER),maxLevel<1&&(maxLevel=1),level=1,1===music&&sounds.overworld.stop(),isDark?(style.innerHTML="body {margin:0px;border:0px;background:rgb(0,0,139);}",image(images.stars,cx/6,0,3*width,3*height)):(background(0,219,255),style.innerHTML="body {margin:0px;border:0px;background:rgb(0,219,255);}"),isDark?fill(0,115,0):fill(0,215,0),rect(cx/3-75,cy/3+300,600,height),rect(cx/3+500,cy/3+400,600,height),rect(cx/3+1e3,cy/3+300,800,height),rect(cx/3+1500,cy/3+250,600,height),isDark?fill(0,130,0):fill(0,230,0),rect(cx/2-100,cy/2+400,600,height),rect(cx/2+500,cy/2+500,600,height),rect(cx/2+1e3,cy/2+300,400,height),rect(cx/2+1e3,cy/2+600,1e3,height),rect(cx/2+2e3,cy/2+200,500,height),py1<0&&(fill(255,255,255,2*(py1-2*py1)),rect(0,0,width,height)),door(1975,350),assets(),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),noStroke(),isDark?fill(0,100,0):fill(0,200,0),rectMode(CORNER),rect(-1e3+cx,0,1e3,height),px1<10+cx&&(px1=10+cx),px2<10+cx&&(px2=10+cx),px3<10+cx&&(px3=10+cx),px4<10+cx&&(px4=10+cx),platform(0,500,150),platform(0,205,200),wall(200,205,150),platform(275,300,225),platform(300,400,200),platform(500,350,200),platform(500,100,200),platform(150,450,100),platform(700,250,200),platform(900,550,300),platform(900,350,300),platform(1400,550,300),platform(1200,475,200),platform(1700,485,200),platform(1900,430,200),py1>height+100&&(scene=-1)}function level1(){sounds.overworld.stop(),init&&(sounds.overworld.stop(),0===music&&(sounds.cave.play(),sounds.cave.loop()),init=!1,coins=[{x:-295,y:1250,visible:!0,collected:!1,type:"yellow"},{x:1300,y:550,visible:!0,collected:!1,type:"yellow"},{x:-600,y:0,visible:!0,collected:!1,type:"blue"}],enemies=[]),maxLevel<2&&(maxLevel=2),level=2,rectMode(CORNERS),noStroke(),1===music&&sounds.cave.stop(),isDark?(style.innerHTML="body {margin:0px;border:0px;background:rgb(10, 35, 39);}",image(images.gems,0,0,2*width,2*height),noStroke()):(background(60,85,89),style.innerHTML="body {margin:0px;border:0px;background:rgb(60,85,89);}"),isDark?fill(29.5):fill(59),rect(cx/3,400+cy/3,300+cx/3,height),rect(300+cx/3,300+cy/3,400+cx/3,height),rect(300+cx/3,300+cy/3,400+cx/3,height),rect(cx/3-400,600+cy/3,cx/3,height),rect(cx/3-800,cy/3-400,300+cx/3,height),isDark?fill(35):fill(70),rect(cx/2,500+cy/2,300+cx/2,height),rect(300+cx/2,400+cy/2,350+cx/2,height),rectMode(CORNER),fill(0,0,0),rect(175+cx,500+cy,50,100),triangle(150+cx,600+cy,250+cx,600+cy,200+cx,700+cy),door(-625,2219),assets(),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),rectMode(CORNER),platform(900,500,200),platform(700,400,200),platform(400,500,200),platform(600,600,100),platform(0,1e3,400),platform(900,600,600),platform(-200,900,200),wall(-100,900,900),platform(-400,1100,200),platform(-500,1300,400),platform(-700,1300,400),spikes(-100,1800,2500),spikes(-100,1801,2500),spikes(-100,1802,2500),platform(-1e3,1200,200),wall(-1100,700,1e3),spikes(-1100,1700,1e3),spikes(-1100,1701,1e3),spikes(-1100,1702,1e3),platform(-800,1100,150),wall(-600,200,1e3),platform(-650,200,100),platform(-1e3,1e3,150),platform(-800,900,150),platform(-1e3,800,150),wall(-1400,500,1500),spikes(-1400,2e3,500),spikes(-1400,2001,500),spikes(-1400,2002,500),platform(-1300,1900,200),platform(-1100,1950,200),platform(-900,2100,200),platform(-700,2300,200),py1<0&&(fill(0,0,0,2*(py1-2*py1)),rect(0,0,width,height)),py1+cy>2300&&(scene=-1)}function level2(){sounds.cave.stop(),init&&(0===music&&(sounds.clouds.play(),sounds.clouds.loop()),init=!1,coins=[{x:1450,y:800,visible:!0,collected:!1,type:"blue"},{x:900,y:-75,visible:!0,collected:!1,type:"yellow"},{x:1875,y:150,visible:!0,collected:!1,type:"yellow"}],clouds.push({x:random(0,width),y:random(0,400),layer:random(0,3)}),clouds.push({x:random(0,width),y:random(0,400),layer:random(0,3)}),clouds.push({x:random(0,width),y:random(0,400),layer:random(0,3)}),clouds.push({x:random(0,width),y:random(0,400),layer:random(0,3)}),clouds.push({x:random(0,width),y:random(0,400),layer:random(0,3)})),cloudX+=1,maxLevel<3&&(maxLevel=3),level=3,1===music&&sounds.clouds.stop(),isDark?(style.innerHTML="body {margin:0px;border:0px;background:rgb(0,0,139);}",image(images.stars,cx/6,0,3*width,3*height)):(background(0,219,255),style.innerHTML="body {margin:0px;border:0px;background:rgb(0,219,255);}"),noStroke(),rectMode(CORNER),219===floor(random(0,220))&&clouds.push({x:-100-cloudX,y:random(0,400)});for(var e=0;e<clouds.length;e++)isDark?fill(155):fill(255),rect(clouds[e].x+cloudX+cx/6,clouds[e].y+cy/6,100,50);isDark?fill(140,140,145):fill(240,240,245),rect(cx/3-75,cy/3+300,600,height),rect(cx/3+500,cy/3+400,600,height),rect(cx/3+1e3,cy/3+300,800,height),rect(cx/3+1500,cy/3+250,600,height),isDark?fill(150,150,155):fill(250,250,255),rect(cx/2-100,cy/2+400,600,height),rect(cx/2+500,cy/2+500,600,height),rect(cx/2+1e3,cy/2+300,400,height),rect(cx/2+1e3,cy/2+600,1e3,height),rect(cx/2+2e3,cy/2+200,500,height),assets(),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),isDark?fill(50):fill(100),rectMode(CORNER),rect(cx,700+cy,700,height),rect(cx-100,500+cy,700,height),rect(cx-200,300+cy,700,height),door(1075,-80),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3),platform(600,800,500),platform(1100,700,100),platform(1100,900,100),platform(1e3,600,100),platform(1200,600,150),platform(1400,500,150),wall(1400,500,500),platform(1400,700,250),platform(1400,850,230),platform(1650,600,150),platform(1800,500,150),platform(1650,350,150),wall(1650,300,200),platform(1450,200,150),platform(1200,100,150),platform(1050,0,150),platform(800,0,200),platform(800,-150,200),wall(800,-150,150),platform(1800,200,150),py1>height+100&&(scene=-1),isDark?fill(25):fill(50),rect(1.25*cx-100,800+1.25*cy,700,height),rect(1.25*cx-200,600+1.25*cy*1.25,700,height),rect(1.25*cx-300,400+1.25*cy,700,height)}function level3(){sounds.clouds.stop(),init&&(0===music&&(sounds.water.play(),sounds.water.loop()),init=!1,coins=[{x:1450,y:800,visible:!0,collected:!1,type:"blue"},{x:900,y:-75,visible:!0,collected:!1,type:"yellow"},{x:1050,y:800,visible:!0,collected:!1,type:"yellow"}]),maxLevel<4&&(maxLevel=4),level=4,1===music&&sounds.clouds.stop(),isDark?(style.innerHTML="body {margin:0px;border:0px;background:rgb(0,0,75);}",background(0,0,75)):(background(0,0,139),style.innerHTML="body {margin:0px;border:0px;background:rgb(0,0,0);}"),assets(),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3)}function level4(){sounds.water.stop(),init&&(0===music&&(sounds.lava.play(),sounds.lava.loop()),init=!1,coins=[{x:1450,y:800,visible:!0,collected:!1,type:"blue"},{x:1250,y:800,visible:!0,collected:!1,type:"yellow"},{x:1050,y:800,visible:!0,collected:!1,type:"yellow"}]),maxLevel<5&&(maxLevel=5),level=5,1===music&&sounds.clouds.stop(),isDark?(style.innerHTML="body {margin:0px;border:0px;background:rgb(75,0,0);}",background(75,0,0)):(background(139,0,0),style.innerHTML="body {margin:0px;border:0px;background:rgb(139,0,0);}"),assets(),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3)}function level5(){sounds.lava.stop(),init&&(0===music&&(sounds.boss.play(),sounds.boss.loop()),init=!1,coins=[{x:1450,y:800,visible:!0,collected:!1,type:"blue"},{x:1250,y:800,visible:!0,collected:!1,type:"yellow"},{x:1050,y:800,visible:!0,collected:!1,type:"yellow"}]),level=6,1===music&&sounds.clouds.stop(),isDark?(style.innerHTML="body {margin:0px;border:0px;background:rgb(75,0,0);}",background(75,0,0)):(background(139,0,0),style.innerHTML="body {margin:0px;border:0px;background:rgb(139,0,0);}"),assets(),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3)}function level6(){init&&(0===music&&(sounds.space.play(),sounds.space.loop()),init=!1,coins=[{x:1450,y:800,visible:!0,collected:!1,type:"blue"},{x:1250,y:800,visible:!0,collected:!1,type:"yellow"},{x:1050,y:800,visible:!0,collected:!1,type:"yellow"}]),maxLevel<7&&(maxLevel=7),level=7,1===music&&sounds.clouds.stop(),isDark?style.innerHTML="body {margin:0px;border:0px;background:rgb(75,0,0);}":(background(139,0,0),style.innerHTML="body {margin:0px;border:0px;background:rgb(139,0,0);}"),assets(),!1===paused&&(controlinator(0),controlinator(1),controlinator(2),controlinator(3)),drawSnooty(0),-1!==controlMode2&&drawSnooty(1),-1!==controlMode3&&drawSnooty(2),-1!==controlMode4&&drawSnooty(3)}function debug(){noStroke(),fill(255),rectMode(CORNER),rect(100,100,250,140),fill(0),textSize(20),textAlign(LEFT,TOP),text("level="+level+", scene="+scene,100,100),text("mouseX="+mouseX+", mouseY="+mouseY,100,120),text("px1="+px1+", py1="+py1,100,140),text("controlMode1="+controlMode1,100,160),text("width="+width+"height="+height,100,180),text("soundRand="+soundRand,100,200)}function draw(){soundRand=floor(random(1,4)),cursor(),(keyIsDown(87)||keyIsDown(83)||keyIsDown(65)||keyIsDown(68)||mouseX!==pmouseX||mouseY!==pmouseY)&&(controlMode1=0),touches.length>0&&(controlMode1=1),(p1.stick.lx>deadzone.inner||p1.stick.lx<deadzone.inner-2*deadzone.inner||p1.stick.ly>deadzone.inner||p1.stick.ly<deadzone.inner-2*deadzone.inner)&&(controlMode1=2),(p1.button.left||p1.button.right||p1.button.up||p1.button.down)&&(controlMode1=3),(keyIsDown(73)||keyIsDown(75)||keyIsDown(74)||keyIsDown(76))&&(controlMode2=0),(p2.stick.lx>deadzone.inner||p2.stick.lx<deadzone.inner-2*deadzone.inner||p2.stick.ly>deadzone.inner||p2.stick.ly<deadzone.inner-2*deadzone.inner)&&(controlMode2=2),(p2.button.left||p2.button.right||p2.button.up||p2.button.down)&&(controlMode2=3),(keyIsDown(38)||keyIsDown(40)||keyIsDown(37)||keyIsDown(39))&&(controlMode3=0),(p3.stick.lx>deadzone.inner||p3.stick.lx<deadzone.inner-2*deadzone.inner||p3.stick.ly>deadzone.inner||p3.stick.ly<deadzone.inner-2*deadzone.inner)&&(controlMode3=2),(p3.button.left||p3.button.right||p3.button.up||p3.button.down)&&(controlMode3=3),(keyIsDown(84)||keyIsDown(71)||keyIsDown(70)||keyIsDown(72))&&(controlMode4=0),(p4.stick.lx>deadzone.inner||p4.stick.lx<deadzone.inner-2*deadzone.inner||p4.stick.ly>deadzone.inner||p4.stick.ly<deadzone.inner-2*deadzone.inner)&&(controlMode4=2),(p4.button.left||p4.button.right||p4.button.up||p4.button.down)&&(controlMode4=3),(2===controlMode1&&p1.button.logo||3===controlMode1&&p1.button.logo)&&(window.location.href="https://turnoffthetv.github.io/programs/snooty-scooty-and-the-frowns/reload/"),width===windowWidth&&height===windowHeight||resizeCanvas(windowWidth,windowHeight),-1===scene&&dead(),.5===scene&&settings(),0===scene&&menu(),1===scene&&level0(),2===scene&&level1(),3===scene&&level2(),4===scene&&level3(),paused&&pause(),scene>.5&&(score1.size=textWidth(score1.score)+5,score2.size=-1!==controlMode2?textWidth(score2.score)+5:0,score3.size=-1!==controlMode3?textWidth(score3.score)+5:0,score4.size=-1!==controlMode4?textWidth(score4.score)+5:0,stroke(0),strokeWeight(3),textAlign(LEFT,TOP),textSize(20),fill(235,255,84),text(score1.score,10,10),-1!==controlMode2&&(fill(128,99,255),text(score2.score,score1.size+10,10)),-1!==controlMode3&&(fill(255,80,80),text(score3.score,score1.size+score2.size+10,10)),-1!==controlMode4&&(fill(76,255,135),text(score4.score,score1.size+score2.size+score3.size+10,10)),noStroke()),!1===document.hasFocus()&&scene>=1&&(paused=!0),music>1&&(music=0),music<0&&(music=1),sfx>1&&(sfx=0),sfx<0&&(sfx=1),"true"===getCookie("useCookies")&&(storeItem("music",music),storeItem("sfx",sfx)),isDark=window.matchMedia("(prefers-color-scheme: dark)").matches,10===month()&&31===day()&&(isDark=!0),"true"===getCookie("dev")&&(debug(),stroke(255,0,0),strokeWeight(5),point(px1,py1),point(px2,py2),point(px3,py3),point(px4,py4),noStroke(),strokeWeight(2)),"true"===query("iframe")&&background(0)}
